---
title: Take (Swap)
description: 'Execute market orders and swaps'
---

# Take (Swap)

The `take` instruction executes a market order by filling against the best available orders.

`swapIx` is an alias for `takeIx` - both methods are identical.

## Basic Swap

```typescript
// Side values: 0 = Bid (sell base), 1 = Ask (buy base)
const Side = { Bid: 0, Ask: 1 };

// Buy base token (take from asks)
const ix = await market.swap({
  side: Side.Ask,           // 1 = buy base token
  amount: 1_000_000n,       // Input amount (quote tokens)
  minOut: 950_000n,         // Minimum output (slippage protection)
  taker: wallet,            // Transaction signer
  takerInput: userQuoteAta, // Your input token account
  takerOutput: userBaseAta, // Your output token account
});

// Add ix to a transaction and send
```

## Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `side` | `number` | `0` (bid/sell base) or `1` (ask/buy base) |
| `amount` | `bigint` | Input amount to swap |
| `minOut` | `bigint` | Minimum output (reverts if not met) |
| `taker` | `TransactionSigner` | Taker wallet (signer) |
| `takerInput` | `Address` | Taker's input token account |
| `takerOutput` | `Address` | Taker's output token account |
| `minOrderBips` | `number` | Skip orders below this % (optional, default 0) |
| `maxOrders` | `number` | Max orders to fill (optional, default 100) |

## Slippage Protection

Always set `minOut` to protect against unfavorable execution:

```typescript
// Fetch a quote to preview the swap
const quote = await market.fetchQuote('buy', 1_000_000n);

// Set minOut with 1% slippage tolerance
const slippageBps = 100n; // 1%
const minOut = quote.output * (10000n - slippageBps) / 10000n;

const ix = await market.swap({
  side: 1, // Ask = buy base
  amount: 1_000_000n,
  minOut,
  taker: wallet,
  takerInput: userQuoteAta,
  takerOutput: userBaseAta,
});
```

## Get Quote

Preview swap output before executing:

```typescript
// 'buy' hits asks (buy base with quote)
// 'sell' hits bids (sell base for quote)
const quote = await market.fetchQuote('buy', 1_000_000n);

console.log('Expected output:', quote.output);
console.log('Average price:', quote.avgPrice);
console.log('Orders touched:', quote.ordersConsumed);
```

## Routing

The take instruction automatically routes across all order sources:

1. **PropAMM orders** - Slot-scoped orders
2. **CLMM orders** - Concentrated liquidity
3. **Limit orders** - Standard fixed-price

Orders are selected purely by best price - the matching engine greedily fills from the cheapest source.
