---
title: CLMM Orders
description: 'Provide liquidity across a price range and earn fees'
---

# CLMM Orders

CLMM (Concentrated Liquidity Market Maker) orders let you provide liquidity within a price range. When trades happen in your range, you earn fees.

## The Basic Idea

Imagine you have 10 SOL and want to sell it, but not all at once. With a CLMM order, you say:

> "I'll sell my SOL anywhere between $145 and $155"

As the price moves through your range, your SOL gradually sells. And here's the key part: **the USDC you receive becomes buying power** to buy SOL back if the price drops.

```
You deposit: 10 SOL
Your range: $145 - $155

Price rises to $150:
  - You've sold ~5 SOL
  - You now have ~5 SOL + ~$725 USDC buying power

Price rises to $155:
  - You've sold all 10 SOL
  - You now have ~$1,500 USDC buying power

Price drops back to $150:
  - Your USDC automatically buys SOL back
  - You now have ~5 SOL + ~$725 USDC again
```

This is **automated market making** - you're continuously buying low and selling high within your range.

## Place a Position

```typescript
const ixs = await market.placeClmmPosition({
  pMin: 145_000_000n,           // Lower price bound: $145
  pMax: 155_000_000n,           // Upper price bound: $155
  maxBase: 10_000_000_000n,     // Max SOL to deposit
  maxQuote: 1_500_000_000_000n, // Max USDC to deposit
  // exponent defaults to 0 (uniform)
  owner: wallet,
});
```

The protocol determines which tokens to take based on where your range sits relative to current price:
- **Range above current price**: Deposits base token (SOL), ready to sell
- **Range below current price**: Deposits quote token (USDC), ready to buy
- **Range spans current price**: Deposits both tokens proportionally

## How the Flip Works

When you place a CLMM order, Braid creates **two linked orders**:

| Order | What it does |
|-------|--------------|
| **Primary** | Your initial position (e.g., selling SOL) |
| **Inverse** | Receives the proceeds (e.g., buying power in USDC) |

When someone buys from your primary order, the filled amount "flips" to the inverse:

```
BEFORE (you deposited 10 SOL to sell):
  Primary (Ask):  10 SOL available to sell @ $145-155
  Inverse (Bid):  $0 buying power

AFTER someone buys 4 SOL at $150:
  Primary (Ask):  6 SOL remaining to sell @ $150-155
  Inverse (Bid):  $600 buying power @ $145-150

The $600 will automatically buy SOL if price drops below $150.
```

## Earning Fees

Every time someone trades against your position, you earn a fee:

```
Trade: Someone buys 1 SOL from you at $150
Fee rate: 30 bps (0.3%)

Your earnings: 1 SOL × $150 × 0.003 = $0.45
```

Fees accumulate in your position and are returned when you cancel.

## Cancel a Position

Cancelling withdraws both your remaining tokens AND any flipped proceeds:

```typescript
const ixs = await market.cancelClmmPosition({
  orderId: 42,
  owner: wallet.publicKey,
});
// Cancels both bid and ask sides, returns remaining tokens + fees
```

## Choosing Your Range

| Range Width | Pros | Cons |
|-------------|------|------|
| **Narrow** (±2%) | Higher fee earnings per dollar | More impermanent loss risk, needs monitoring |
| **Medium** (±10%) | Balanced | Moderate risk |
| **Wide** (±25%) | Low maintenance, less IL | Lower fee earnings per dollar |

```typescript
// Narrow range - aggressive fee farming
const ixs = await market.placeClmmPosition({
  pMin: 148_000_000n,           // $148
  pMax: 152_000_000n,           // $152 (±~1.3%)
  maxBase: 10_000_000_000n,
  maxQuote: 1_500_000_000_000n,
  owner: wallet,
});

// Wide range - passive income
const ixs = await market.placeClmmPosition({
  pMin: 120_000_000n,           // $120
  pMax: 180_000_000n,           // $180 (±~20%)
  maxBase: 10_000_000_000n,
  maxQuote: 1_500_000_000_000n,
  owner: wallet,
});
```

## Density Curves (Gamma/Exponent)

The `exponent` parameter (also called gamma) controls how your liquidity is distributed across the range:

| Exponent | Distribution | Best for |
|----------|--------------|----------|
| -5 to -1 | Front-loaded - more liquidity near the spread | Aggressive quoting, quick fills |
| 0 | Uniform - equal liquidity everywhere | General purpose |
| +1 to +5 | Back-loaded - more liquidity at range edges | Gradual DCA, tail risk capture |

The `curveShift` parameter (-1 to +1) shifts the distribution horizontally within your range without changing its shape.

For most users, `exponent: 0` (uniform) is the right choice. Market makers typically use non-zero exponents with skew adjustments.

## Impermanent Loss

<Warning>
CLMM positions have **impermanent loss (IL)** risk. If price moves strongly in one direction:

- Price goes up a lot: You end up holding all USDC (you sold all your SOL on the way up)
- Price goes down a lot: You end up holding all SOL (you bought SOL all the way down)

The loss is "impermanent" because it reverses if price returns to your entry point. But if you withdraw while the price is far from your entry, the loss becomes permanent.
</Warning>

## Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `pMin` | `bigint` | Lower price bound |
| `pMax` | `bigint` | Upper price bound |
| `maxBase` | `bigint` | Maximum base token (token A) to deposit |
| `maxQuote` | `bigint` | Maximum quote token (token B) to deposit |
| `exponent` | `number?` | Gamma/density curve shape (-5 to +5). Positive = more density at edges, Negative = more density near mid, Zero = uniform. Defaults to 0 |
| `curveShift` | `number?` | Horizontal shift of density within range (-1 to +1). Defaults to 0 |
| `owner` | `TransactionSigner` | Position owner (signer) |

## When to Use CLMM

**Good for:**
- Earning passive fee income
- Market making without active management
- Tokens you're happy to hold either way

**Not ideal for:**
- Tokens you only want to hold one-sided
- Highly volatile pairs (high IL risk)
- Short-term speculation
