---
title: Limit Orders
description: 'Price range orders with concentrated liquidity'
---

# Limit Orders

Limit orders in Braid use concentrated liquidity curves with a price range.

## Overview

Limit orders specify:
- Price range (pMin to pMax)
- Explicit side (bid or ask)
- Amount of liquidity to provide
- FIFO execution within price level

## Structure

```rust
struct LimitOrder {
    p_min: u64,              // Lower price bound
    p_max: u64,              // Upper price bound
    exponent: u8,            // Density curve exponent (0=uniform, 1=linear, 2+=concentrated)
    amount_remaining: u64,   // Unfilled amount
    full_amount: u64,        // Original order size
    owner: Address,          // Order owner
    order_id: u64,           // Unique ID
    side: Side,              // Bid or Ask
}
```

## Place Order

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    // Place a bid (buy order)
    const ix = await market.placeLimitOrder({
      side: 'bid',
      pMin: 95_000_000n,        // Lower price bound
      pMax: 100_000_000n,       // Upper price bound
      amount: 1_000_000_000n,   // USDC to spend
      // exponent defaults to 0 (uniform distribution)
      owner: wallet,
    });

    // Place an ask (sell order)
    const ix = await market.placeLimitOrder({
      side: 'ask',
      pMin: 100_000_000n,
      pMax: 105_000_000n,
      amount: 10_000_000n,      // SOL to sell
      owner: wallet,
    });
    ```
  </Tab>
  <Tab title="Instruction">
    ```
    Instruction: PlaceLimitOrder
    Accounts:
      0. [writable] Market
      1. [writable] Shard (matching price range)
      2. [writable] User account
      3. [writable] User token account
      4. [writable] Vault
      5. [signer] Owner
      6. [] Token program
    ```
  </Tab>
</Tabs>

## Cancel Order

```typescript
const tx = await market.cancelLimitOrder({
  orderId: 42,
  owner: wallet,
});
```

## Price Range

The price range determines where your order is active:

- **Tight range** (pMin close to pMax): More concentrated liquidity, fills faster at your target price
- **Wide range** (pMin far from pMax): More flexibility, may fill across a range of prices

```typescript
// Tight range: Buy around $100 (exponent defaults to 0 = uniform)
const ix = await market.placeLimitOrder({
  side: 'bid',
  pMin: 99_000_000n,
  pMax: 101_000_000n,
  amount: 1_000_000_000n,
  owner: wallet,
});

// Wide range with linear density curve
const ixWide = await market.placeLimitOrder({
  side: 'bid',
  pMin: 95_000_000n,
  pMax: 105_000_000n,
  amount: 1_000_000_000n,
  exponent: 1,            // Linear increase toward edge
  owner: wallet,
});
```

## Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `side` | `'bid' \| 'ask'` | Order side: 'bid' (buy base) or 'ask' (sell base) |
| `pMin` | `bigint` | Lower price bound |
| `pMax` | `bigint` | Upper price bound |
| `amount` | `bigint` | Order amount (quote tokens for bids, base tokens for asks) |
| `mode` | `'standard' \| 'postOnly' \| 'ioc'` | Execution mode. Defaults to 'standard' |
| `exponent` | `number?` | Density curve (0=uniform, 1=linear, 2+=concentrated). Defaults to 0 |
| `owner` | `TransactionSigner` | Order owner (signer) |

### Execution Modes

| Mode | Behavior |
|------|----------|
| `standard` | Cross if possible, rest remainder on book (default) |
| `postOnly` | Reject if order would cross the spread (maker-only) |
| `ioc` | Fill immediately, cancel any unfilled remainder |

## Fees

Limit order fees are configured per-market:

| Fee | Description |
|-----|-------------|
| `limit_fee_bps` | Taker fee (basis points) |
| `protocol_fee_bps` | Protocol share of fees |
| `referral_fee_bps` | Referral share (if applicable) |
